{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport Axios from \"axios\";\nimport { useSelector } from \"react-redux\"; // import { getAccessToken } from '../services/auth';\n\nimport config from \"../config\";\nimport { selectUser } from \"../features/userSlice\";\nexport const bati = Axios.create({\n  baseURL: `${config.api.baseUrl}`\n});\nexport const auth = async () => {\n  _s();\n\n  const user = useSelector(selectUser);\n  let auth = `${config.api.clientId}:${config.api.clientSecret}`;\n  let encodedAuth = btoa(auth);\n  const data = await Axios({\n    method: \"post\",\n    url: \"https://accounts.spotify.com/api/token\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Authorization: `Basic ${encodedAuth}`\n    },\n    data: \"grant_type=client_credentials\"\n  }).then(res => {\n    //   return res.data.access_token;\n    return res.data;\n  }).catch(e => {\n    return e.response.data;\n  }); //   if (typeof document !== \"undefined\") {\n  //     console.log(accessToken);\n  //     document.cookie = `accessToken=${accessToken}; path=/`;\n  //   }\n  //   return accessToken ? accessToken : null;\n\n  return data ? data : null;\n};\n\n_s(auth, \"ODc3cjw/vvoWaLFqHWcEGODyOfo=\", false, function () {\n  return [useSelector];\n});\n\nbati.interceptors.request.use(async config => {\n  //   let appSpotify = window.__APP_SPOTIFY__;\n  //   console.log(appSpotify)\n  //   const token = await getAccessToken();\n  const token = appSpotify.access_token;\n\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n});","map":{"version":3,"sources":["C:/Users/wijay/OneDrive/Desktop/spootify/src/utils/Axios.js"],"names":["Axios","useSelector","config","selectUser","bati","create","baseURL","api","baseUrl","auth","user","clientId","clientSecret","encodedAuth","btoa","data","method","url","headers","Authorization","then","res","catch","e","response","interceptors","request","use","token","appSpotify","access_token"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B,C,CACA;;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,UAAT,QAA2B,uBAA3B;AAEA,OAAO,MAAMC,IAAI,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC/BC,EAAAA,OAAO,EAAG,GAAEJ,MAAM,CAACK,GAAP,CAAWC,OAAQ;AADA,CAAb,CAAb;AAIP,OAAO,MAAMC,IAAI,GAAG,YAAY;AAAA;;AAChC,QAAMC,IAAI,GAAGT,WAAW,CAACE,UAAD,CAAxB;AACE,MAAIM,IAAI,GAAI,GAAEP,MAAM,CAACK,GAAP,CAAWI,QAAS,IAAGT,MAAM,CAACK,GAAP,CAAWK,YAAa,EAA7D;AACA,MAAIC,WAAW,GAAGC,IAAI,CAACL,IAAD,CAAtB;AACA,QAAMM,IAAI,GAAG,MAAMf,KAAK,CAAC;AACvBgB,IAAAA,MAAM,EAAE,MADe;AAEvBC,IAAAA,GAAG,EAAE,wCAFkB;AAGvBC,IAAAA,OAAO,EAAE;AACP,sBAAgB,mCADT;AAEPC,MAAAA,aAAa,EAAG,SAAQN,WAAY;AAF7B,KAHc;AAOvBE,IAAAA,IAAI,EAAE;AAPiB,GAAD,CAAL,CAShBK,IATgB,CASVC,GAAD,IAAS;AACb;AACA,WAAOA,GAAG,CAACN,IAAX;AACD,GAZgB,EAahBO,KAbgB,CAaTC,CAAD,IAAO;AACZ,WAAOA,CAAC,CAACC,QAAF,CAAWT,IAAlB;AACD,GAfgB,CAAnB,CAJ8B,CAqB9B;AACA;AACA;AACA;AACA;;AACA,SAAOA,IAAI,GAAGA,IAAH,GAAU,IAArB;AACD,CA3BM;;GAAMN,I;UACAR,W;;;AA4BbG,IAAI,CAACqB,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,MAAOzB,MAAP,IAAkB;AAChD;AACA;AACE;AACA,QAAM0B,KAAK,GAAGC,UAAU,CAACC,YAAzB;;AACA,MAAIF,KAAJ,EAAW;AACT1B,IAAAA,MAAM,CAACgB,OAAP,CAAeC,aAAf,GAAgC,UAASS,KAAM,EAA/C;AACD;;AACD,SAAO1B,MAAP;AACD,CATD","sourcesContent":["import Axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\n// import { getAccessToken } from '../services/auth';\r\nimport config from \"../config\";\r\nimport { selectUser } from \"../features/userSlice\";\r\n\r\nexport const bati = Axios.create({\r\n  baseURL: `${config.api.baseUrl}`,\r\n});\r\n\r\nexport const auth = async () => {\r\nconst user = useSelector(selectUser);\r\n  let auth = `${config.api.clientId}:${config.api.clientSecret}`;\r\n  let encodedAuth = btoa(auth);\r\n  const data = await Axios({\r\n    method: \"post\",\r\n    url: \"https://accounts.spotify.com/api/token\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      Authorization: `Basic ${encodedAuth}`,\r\n    },\r\n    data: \"grant_type=client_credentials\",\r\n  })\r\n    .then((res) => {\r\n      //   return res.data.access_token;\r\n      return res.data;\r\n    })\r\n    .catch((e) => {\r\n      return e.response.data;\r\n    });\r\n\r\n  //   if (typeof document !== \"undefined\") {\r\n  //     console.log(accessToken);\r\n  //     document.cookie = `accessToken=${accessToken}; path=/`;\r\n  //   }\r\n  //   return accessToken ? accessToken : null;\r\n  return data ? data : null;\r\n};\r\n\r\nbati.interceptors.request.use(async (config) => {\r\n//   let appSpotify = window.__APP_SPOTIFY__;\r\n//   console.log(appSpotify)\r\n  //   const token = await getAccessToken();\r\n  const token = appSpotify.access_token;\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n"]},"metadata":{},"sourceType":"module"}