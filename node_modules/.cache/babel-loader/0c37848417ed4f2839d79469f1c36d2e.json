{"ast":null,"code":"import Axios from \"axios\"; // import { getAccessToken } from '../services/auth';\n\nimport config from \"../config\";\nexport const bati = Axios.create({\n  baseURL: `${config.api.baseUrl}`\n});\nexport const getAccessToken = async () => {\n  let auth = `${config.api.clientId}:${config.api.clientSecret}`;\n  let encodedAuth = btoa(auth);\n  let initBody = new URLSearchParams();\n  initBody.set(\"grant_type\", \"client_credentials\");\n  const accessToken = await Axios({\n    method: \"post\",\n    url: \"https://accounts.spotify.com/api/token\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Authorization: `Basic ${encodedAuth}`\n    },\n    data: initBody\n  }).then(res => {\n    return res.data.access_token;\n  }).catch(e => {\n    return e.response.data;\n  });\n\n  if (typeof document !== \"undefined\") {\n    console.log(\"asd\");\n    document.cookie = `accessToken=${accessToken}; path=/`;\n  } //   return accessToken ? accessToken : null;\n\n};\nbati.interceptors.request.use(async config => {\n  let appSpotify = window.__APP_SPOTIFY__; //   const token = await getAccessToken();\n\n  const token = appSpotify.access_token;\n\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n});","map":{"version":3,"sources":["C:/Users/wijay/OneDrive/Desktop/spootify/src/utils/Axios.js"],"names":["Axios","config","bati","create","baseURL","api","baseUrl","getAccessToken","auth","clientId","clientSecret","encodedAuth","btoa","initBody","URLSearchParams","set","accessToken","method","url","headers","Authorization","data","then","res","access_token","catch","e","response","document","console","log","cookie","interceptors","request","use","appSpotify","window","__APP_SPOTIFY__","token"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAO,MAAMC,IAAI,GAAGF,KAAK,CAACG,MAAN,CAAa;AAC/BC,EAAAA,OAAO,EAAG,GAAEH,MAAM,CAACI,GAAP,CAAWC,OAAQ;AADA,CAAb,CAAb;AAIP,OAAO,MAAMC,cAAc,GAAG,YAAY;AACxC,MAAIC,IAAI,GAAI,GAAEP,MAAM,CAACI,GAAP,CAAWI,QAAS,IAAGR,MAAM,CAACI,GAAP,CAAWK,YAAa,EAA7D;AACA,MAAIC,WAAW,GAAGC,IAAI,CAACJ,IAAD,CAAtB;AACA,MAAIK,QAAQ,GAAG,IAAIC,eAAJ,EAAf;AACAD,EAAAA,QAAQ,CAACE,GAAT,CAAa,YAAb,EAA2B,oBAA3B;AACA,QAAMC,WAAW,GAAG,MAAMhB,KAAK,CAAC;AAC9BiB,IAAAA,MAAM,EAAE,MADsB;AAE9BC,IAAAA,GAAG,EAAE,wCAFyB;AAG9BC,IAAAA,OAAO,EAAE;AACP,sBAAgB,mCADT;AAEPC,MAAAA,aAAa,EAAG,SAAQT,WAAY;AAF7B,KAHqB;AAO9BU,IAAAA,IAAI,EAAER;AAPwB,GAAD,CAAL,CASvBS,IATuB,CASjBC,GAAD,IAAS;AACb,WAAOA,GAAG,CAACF,IAAJ,CAASG,YAAhB;AACD,GAXuB,EAYvBC,KAZuB,CAYhBC,CAAD,IAAO;AACZ,WAAOA,CAAC,CAACC,QAAF,CAAWN,IAAlB;AACD,GAduB,CAA1B;;AAeA,MAAI,OAAOO,QAAP,KAAoB,WAAxB,EAAqC;AACjCC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACFF,IAAAA,QAAQ,CAACG,MAAT,GAAmB,eAAcf,WAAY,UAA7C;AACD,GAvBuC,CAwBxC;;AACD,CAzBM;AA2BPd,IAAI,CAAC8B,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,MAAOjC,MAAP,IAAkB;AAC9C,MAAIkC,UAAU,GAAGC,MAAM,CAACC,eAAxB,CAD8C,CAE9C;;AACA,QAAMC,KAAK,GAAGH,UAAU,CAACX,YAAzB;;AACA,MAAIc,KAAJ,EAAW;AACTrC,IAAAA,MAAM,CAACkB,OAAP,CAAeC,aAAf,GAAgC,UAASkB,KAAM,EAA/C;AACD;;AACD,SAAOrC,MAAP;AACD,CARD","sourcesContent":["import Axios from \"axios\";\r\n// import { getAccessToken } from '../services/auth';\r\nimport config from \"../config\";\r\n\r\nexport const bati = Axios.create({\r\n  baseURL: `${config.api.baseUrl}`,\r\n});\r\n\r\nexport const getAccessToken = async () => {\r\n  let auth = `${config.api.clientId}:${config.api.clientSecret}`;\r\n  let encodedAuth = btoa(auth);\r\n  let initBody = new URLSearchParams();\r\n  initBody.set(\"grant_type\", \"client_credentials\");\r\n  const accessToken = await Axios({\r\n    method: \"post\",\r\n    url: \"https://accounts.spotify.com/api/token\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      Authorization: `Basic ${encodedAuth}`,\r\n    },\r\n    data: initBody,\r\n  })\r\n    .then((res) => {\r\n      return res.data.access_token;\r\n    })\r\n    .catch((e) => {\r\n      return e.response.data;\r\n    });\r\n  if (typeof document !== \"undefined\") {\r\n      console.log(\"asd\")\r\n    document.cookie = `accessToken=${accessToken}; path=/`;\r\n  }\r\n  //   return accessToken ? accessToken : null;\r\n};\r\n\r\nbati.interceptors.request.use(async (config) => {\r\n  let appSpotify = window.__APP_SPOTIFY__;\r\n  //   const token = await getAccessToken();\r\n  const token = appSpotify.access_token;\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n"]},"metadata":{},"sourceType":"module"}